within Example2.Base.Networks.Tests;
model TestBasePFRecords "Tests the base network model"
  extends Modelica.Icons.Example;
  extends Example2.Base.Networks.BasePFRecords;
  Plants.inf g1(
    v_0=pf.bus.V1,
    angle_0=pf.bus.A1,
    P_0=pf.machines.PG1,
    Q_0=pf.machines.QG1)
    annotation (Placement(transformation(extent={{-248,6},{-228,26}})));
  Plants.inf g2(
    v_0=pf.voltages.V2,
    angle_0=pf.voltages.A2,
    P_0=pf.machines.PG1,
    Q_0=pf.machines.QG2)
    annotation (Placement(transformation(extent={{-248,-38},{-236,-26}})));
  Plants.inf g3(
    v_0=pf.voltages.V3,
    angle_0=pf.voltages.A3,
    P_0=pf.machines.PG3,
    Q_0=pf.machines.QG3) annotation (Placement(transformation(
        extent={{-6,-6},{6,6}},
        rotation=180,
        origin={256,16})));
  Plants.inf g4(
    v_0=pf.voltages.V4,
    angle_0=pf.voltages.A4,
    P_0=pf.machines.PG4,
    Q_0=pf.machines.QG4) annotation (Placement(transformation(
        extent={{-6,-6},{6,6}},
        rotation=180,
        origin={252,-24})));
  Modelica.Blocks.Sources.Constant const(k=0)
    annotation (Placement(transformation(extent={{-114,-32},{-94,-12}})));
  Modelica.Blocks.Sources.Constant const1(k=0)
    annotation (Placement(transformation(extent={{96,-50},{116,-30}})));
equation
  connect(g1.pwPin, bus1.p)
    annotation (Line(points={{-227,16},{-220,16}}, color={0,0,255}));
  connect(g2.pwPin, bus2.p) annotation (Line(points={{-235.4,-32},{-230,-32},{-230,
          -14},{-220,-14}}, color={0,0,255}));
  connect(g3.pwPin, bus3.p)
    annotation (Line(points={{249.4,16},{240,16}}, color={0,0,255}));
  connect(bus4.p, g4.pwPin)
    annotation (Line(points={{240,-24},{245.4,-24}}, color={0,0,255}));
  connect(const.y, Load7.u) annotation (Line(points={{-93,-22},{-84,-22},{-84,-19.85},
          {-75.34,-19.85}}, color={0,0,127}));
  connect(const1.y, Load9.u) annotation (Line(points={{117,-40},{138,-40},{138,-19.85},
          {77.15,-19.85}}, color={0,0,127}));
  annotation (experiment(StopTime=10));
end TestBasePFRecords;
